{% schema %}
{
  "name": "Photo Gallery",
  "settings": [
    {
      "type": "textarea",
      "id": "image_urls",
      "label": "Image URLs",
      "info": "Enter each image URL on a new line"
    }
  ],
  "presets": [
    {
      "name": "Default",
      "category": "Gallery"
    }
  ]
}
{% endschema %}

<link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">

<div class="photo-gallery">
  {% assign image_urls = section.settings.image_urls | split: "
" %}
  {% for image_url in image_urls %}
  {% if image_url != blank %}
  <div class="gallery-item">
    <a href="{{ image_url | strip }}" data-fancybox="gallery">
      <img src="{{ image_url | strip }}" alt="Gallery image" style="width: 400px; height: 300px; object-fit: cover;">
    </a>
  </div>
  {% endif %}
  {% endfor %}
</div>

<style>
  .photo-gallery {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  .gallery-item {
    flex: 1 1 calc(33.333% - 10px);
    box-sizing: border-box;
    overflow: hidden;
    position: relative;
  }
  .gallery-item img {
    width: 100%;
    height: 300px; /* Adjust height as needed */
    object-fit: cover;
  }
  @media (max-width: 768px) {
    .gallery-item {
      flex: 1 1 calc(50% - 10px);
    }
  }
  @media (max-width: 480px) {
    .gallery-item {
      flex: 1 1 100%;
    }
  }
  .fancybox-container::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: -1;
  }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
<script>
  $(document).ready(function() {
    $('[data-fancybox="gallery"]').fancybox({
      buttons: [
        "zoom",
        "close"
      ],
      mobile: {
        clickSlide: "close",
        clickOutside: "close"
      },
      afterLoad: function(instance, current) {
        instance.$refs.container.css({
          'background': 'rgba(0, 0, 0, 0.7)',
          'backdrop-filter': 'blur(5px)'
        });
      }
    });
  });
</script>